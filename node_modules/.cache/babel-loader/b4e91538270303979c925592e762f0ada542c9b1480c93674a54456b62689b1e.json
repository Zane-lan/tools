{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nexport default {\n  name: 'TreeMenu',\n  props: {\n    menuData: {\n      type: Array,\n      required: true\n    },\n    searchQuery: {\n      type: String,\n      default: ''\n    }\n  },\n  computed: {\n    // 过滤菜单项\n    filteredMenu() {\n      const query = this.searchQuery.toLowerCase();\n      if (!query) return this.menuData;\n      const filterItems = items => {\n        return items.map(item => {\n          // 复制对象以避免修改原始数据\n          const newItem = {\n            ...item\n          };\n          if (newItem.children) {\n            newItem.children = filterItems(newItem.children);\n          }\n          return newItem;\n        }).filter(item => {\n          // 保留匹配项或其子项匹配的菜单项\n          return item.name.toLowerCase().includes(query) || item.children && item.children.length > 0;\n        });\n      };\n      return filterItems(this.menuData);\n    }\n  },\n  methods: {\n    handleItemClick(item) {\n      if (item.children) {\n        item.isOpen = !item.isOpen;\n      } else {\n        this.$router.push(item.path);\n      }\n    },\n    // 高亮匹配的关键字\n    highlightMatch(text) {\n      const query = this.searchQuery.toLowerCase();\n      if (!query) return text;\n      const regex = new RegExp(`(${query})`, 'gi');\n      return text.replace(regex, '<span class=\"highlight\">$1</span>');\n    },\n    // 输入事件处理\n    onInput(event) {\n      this.$emit('update:searchQuery', event.target.value);\n    }\n  }\n};","map":{"version":3,"names":["name","props","menuData","type","Array","required","searchQuery","String","default","computed","filteredMenu","query","toLowerCase","filterItems","items","map","item","newItem","children","filter","includes","length","methods","handleItemClick","isOpen","$router","push","path","highlightMatch","text","regex","RegExp","replace","onInput","event","$emit","target","value"],"sources":["/Volumes/data/project/my_web/tools/src/components/TreeMenu.vue"],"sourcesContent":["<template>\n    <div class=\"tree-menu-container\">\n        <!-- 搜索框 -->\n        <input\n                :value=\"searchQuery\" <!-- 绑定 prop -->\n        @input=\"onInput\" <!-- 监听输入事件 -->\n        placeholder=\"Search...\"\n        class=\"search-input\"\n        />\n        <!-- 树形菜单 -->\n        <ul class=\"tree-menu\">\n            <li v-for=\"item in filteredMenu\" :key=\"item.name\">\n                <div @click=\"handleItemClick(item)\" class=\"menu-item\">\n                    <!-- 高亮匹配项 -->\n                    <span v-html=\"highlightMatch(item.name)\"></span>\n                    <span v-if=\"item.children\" class=\"arrow\">\n            {{ item.isOpen ? '▼' : '▶' }}\n          </span>\n                </div>\n                <TreeMenu\n                        v-if=\"item.children && item.isOpen\"\n                        :menu-data=\"item.children\"\n                        :search-query=\"searchQuery\"\n                        @update:searchQuery=\"(value) => $emit('update:searchQuery', value)\"\n                />\n            </li>\n        </ul>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'TreeMenu',\n    props: {\n        menuData: {\n            type: Array,\n            required: true,\n        },\n        searchQuery: {\n            type: String,\n            default: '',\n        },\n    },\n    computed: {\n        // 过滤菜单项\n        filteredMenu() {\n            const query = this.searchQuery.toLowerCase();\n            if (!query) return this.menuData;\n\n            const filterItems = (items) => {\n                return items\n                        .map((item) => {\n                            // 复制对象以避免修改原始数据\n                            const newItem = { ...item };\n                            if (newItem.children) {\n                                newItem.children = filterItems(newItem.children);\n                            }\n                            return newItem;\n                        })\n                        .filter((item) => {\n                            // 保留匹配项或其子项匹配的菜单项\n                            return (\n                                    item.name.toLowerCase().includes(query) ||\n                                    (item.children && item.children.length > 0)\n                            );\n                        });\n            };\n\n            return filterItems(this.menuData);\n        },\n    },\n    methods: {\n        handleItemClick(item) {\n            if (item.children) {\n                item.isOpen = !item.isOpen;\n            } else {\n                this.$router.push(item.path);\n            }\n        },\n        // 高亮匹配的关键字\n        highlightMatch(text) {\n            const query = this.searchQuery.toLowerCase();\n            if (!query) return text;\n\n            const regex = new RegExp(`(${query})`, 'gi');\n            return text.replace(regex, '<span class=\"highlight\">$1</span>');\n        },\n        // 输入事件处理\n        onInput(event) {\n            this.$emit('update:searchQuery', event.target.value);\n        },\n    },\n};\n</script>\n\n<style>\n.tree-menu-container {\n    width: 100%;\n}\n\n.search-input {\n    width: 100%;\n    padding: 8px;\n    margin-bottom: 10px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    font-size: 14px;\n}\n\n.tree-menu {\n    list-style-type: none;\n    padding-left: 20px;\n}\n\n.menu-item {\n    padding: 8px;\n    cursor: pointer;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.menu-item:hover {\n    background-color: #f0f0f0;\n}\n\n.arrow {\n    font-size: 12px;\n}\n\n.highlight {\n    background-color: yellow;\n    font-weight: bold;\n}\n</style>\n"],"mappings":";;;;AA+BA,eAAe;EACXA,IAAI,EAAE,UAAU;EAChBC,KAAK,EAAE;IACHC,QAAQ,EAAE;MACNC,IAAI,EAAEC,KAAK;MACXC,QAAQ,EAAE;IACd,CAAC;IACDC,WAAW,EAAE;MACTH,IAAI,EAAEI,MAAM;MACZC,OAAO,EAAE;IACb;EACJ,CAAC;EACDC,QAAQ,EAAE;IACN;IACAC,YAAYA,CAAA,EAAG;MACX,MAAMC,KAAI,GAAI,IAAI,CAACL,WAAW,CAACM,WAAW,CAAC,CAAC;MAC5C,IAAI,CAACD,KAAK,EAAE,OAAO,IAAI,CAACT,QAAQ;MAEhC,MAAMW,WAAU,GAAKC,KAAK,IAAK;QAC3B,OAAOA,KAAI,CACFC,GAAG,CAAEC,IAAI,IAAK;UACX;UACA,MAAMC,OAAM,GAAI;YAAE,GAAGD;UAAK,CAAC;UAC3B,IAAIC,OAAO,CAACC,QAAQ,EAAE;YAClBD,OAAO,CAACC,QAAO,GAAIL,WAAW,CAACI,OAAO,CAACC,QAAQ,CAAC;UACpD;UACA,OAAOD,OAAO;QAClB,CAAC,EACAE,MAAM,CAAEH,IAAI,IAAK;UACd;UACA,OACQA,IAAI,CAAChB,IAAI,CAACY,WAAW,CAAC,CAAC,CAACQ,QAAQ,CAACT,KAAK,KACrCK,IAAI,CAACE,QAAO,IAAKF,IAAI,CAACE,QAAQ,CAACG,MAAK,GAAI,CAAC;QAEtD,CAAC,CAAC;MACd,CAAC;MAED,OAAOR,WAAW,CAAC,IAAI,CAACX,QAAQ,CAAC;IACrC;EACJ,CAAC;EACDoB,OAAO,EAAE;IACLC,eAAeA,CAACP,IAAI,EAAE;MAClB,IAAIA,IAAI,CAACE,QAAQ,EAAE;QACfF,IAAI,CAACQ,MAAK,GAAI,CAACR,IAAI,CAACQ,MAAM;MAC9B,OAAO;QACH,IAAI,CAACC,OAAO,CAACC,IAAI,CAACV,IAAI,CAACW,IAAI,CAAC;MAChC;IACJ,CAAC;IACD;IACAC,cAAcA,CAACC,IAAI,EAAE;MACjB,MAAMlB,KAAI,GAAI,IAAI,CAACL,WAAW,CAACM,WAAW,CAAC,CAAC;MAC5C,IAAI,CAACD,KAAK,EAAE,OAAOkB,IAAI;MAEvB,MAAMC,KAAI,GAAI,IAAIC,MAAM,CAAC,IAAIpB,KAAK,GAAG,EAAE,IAAI,CAAC;MAC5C,OAAOkB,IAAI,CAACG,OAAO,CAACF,KAAK,EAAE,mCAAmC,CAAC;IACnE,CAAC;IACD;IACAG,OAAOA,CAACC,KAAK,EAAE;MACX,IAAI,CAACC,KAAK,CAAC,oBAAoB,EAAED,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC;IACxD;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}